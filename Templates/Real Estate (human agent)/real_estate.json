{ 
    "onboarding":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"72e69dde-7b9f-4970-b5e5-081dacd0ea9f",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":false,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:38780",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"welcome",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"matches",
                   "values":[ 
                      ".*"
                   ],
                   "$$hashKey":"object:38827"
                }
             ],
             "$connId":"con_3",
             "$$hashKey":"object:38808",
             "$invalid":false
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"onboarding",
       "root":true,
       "$position":{ 
          "top":"223px",
          "left":"236px"
       },
       "$title":"In√≠cio",
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "fallback":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"9b01eaa9-71cd-4771-b1da-fb36826c24d2",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:39010",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"error",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"matches",
                   "values":[ 
                      ".*"
                   ],
                   "$$hashKey":"object:39055"
                }
             ],
             "$connId":"con_8",
             "$$hashKey":"object:39036",
             "$invalid":false
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"onboarding",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"fallback",
       "$position":{ 
          "top":"67px",
          "left":"241px"
       },
       "$title":"Exce√ß√µes",
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "welcome":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"00000000-0000-0000-0000-000000000000",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"00000000-0000-0000-0000-000000000000",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left",
                   "editing":false
                }
             },
             "$$hashKey":"object:39486",
             "$invalid":false
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"00000000-0000-0000-0000-000000000001",
                   "type":"text/plain",
                   "content":"Ol√°! üòç\nSeja bem-vindo(a)!"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"00000000-0000-0000-0000-000000000001",
                      "type":"text/plain",
                      "content":"Ol√°! üòç\nSeja bem-vindo(a)!"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left",
                   "editing":false
                }
             },
             "$$hashKey":"object:39487",
             "$invalid":false
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"6ff30949-92a1-48f6-bb7e-7ad5efef59d0",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"6ff30949-92a1-48f6-bb7e-7ad5efef59d0",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:41142"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"c8226aa8-b573-45c0-9af0-5e4346c6d3c3",
                   "type":"text/plain",
                   "content":"Eu sou Pathy üë©üèª, a sua assistente virtual."
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"c8226aa8-b573-45c0-9af0-5e4346c6d3c3",
                      "type":"text/plain",
                      "content":"Eu sou Pathy üë©üèª, a sua assistente virtual."
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:41143"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"3fd9ffff-a203-4edc-b112-9f131ac2e783",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"3fd9ffff-a203-4edc-b112-9f131ac2e783",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:41725"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"8e98becc-ba97-4924-a1bf-883286d3680e",
                   "type":"text/plain",
                   "content":"Estou aqui para te ajudar a encontrar a sua casa üè† dos sonhos. "
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"8e98becc-ba97-4924-a1bf-883286d3680e",
                      "type":"text/plain",
                      "content":"Estou aqui para te ajudar a encontrar a sua casa üè† dos sonhos. "
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:41726"
          },
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"abe7e4d3-8f26-41de-b45b-097e3914f3ed",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:39488",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"20ea4798-8bd1-47e1-986b-978629164d6f",
             "$connId":"con_13",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:42818"
                }
             ],
             "$$hashKey":"object:42799",
             "$invalid":false
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"welcome",
       "$position":{ 
          "top":"343px",
          "left":"236px"
       },
       "$title":"Boas vindas",
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "error":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"00000000-0000-0000-0000-000000000002",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"00000000-0000-0000-0000-000000000002",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left",
                   "editing":false
                }
             },
             "$invalid":false
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"00000000-0000-0000-0000-000000000003",
                   "type":"text/plain",
                   "content":"Desculpe, n√£o consegui entender!"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"00000000-0000-0000-0000-000000000003",
                      "type":"text/plain",
                      "content":"Desculpe, n√£o consegui entender!"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left",
                   "editing":false
                }
             },
             "$invalid":false
          },
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"27e1b14f-ef36-45d7-bded-97b75d8ab236",
                      "type":"text/plain"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
 
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"onboarding",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"error",
       "$position":{ 
          "top":"67px",
          "left":"467px"
       },
       "$title":"Erro padr√£o",
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "20ea4798-8bd1-47e1-986b-978629164d6f":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"4093a444-a8fe-497a-90bf-6f08d1e162fd",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"4093a444-a8fe-497a-90bf-6f08d1e162fd",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:7749"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"fdec045a-5320-4f33-982f-1417ab7ce786",
                   "type":"text/plain",
                   "content":"Qual o motivo de seu contato?\n\n1. Compra\n2. Aluguel"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"fdec045a-5320-4f33-982f-1417ab7ce786",
                      "type":"text/plain",
                      "content":"Qual o motivo de seu contato?\n\n1. Compra\n2. Aluguel"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:7750"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"ea696004-0182-460b-8733-7b07e2ab88c6",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:41812",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"4cf44161-0ebf-40f3-94f2-ebb126d4a462",
             "$connId":"con_18",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"contains",
                   "values":[ 
                      "1",
                      "compra",
                      "comprar",
                      "compras",
                      "investir",
                      "1. compra",
                      "1."
                   ],
                   "$$hashKey":"object:5519"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:5510"
          },
          { 
             "stateId":"9dfa0cfe-f10f-49b1-b44e-032120b23796",
             "$connId":"con_23",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"contains",
                   "values":[ 
                      "2",
                      "2.",
                      "alugar",
                      "aluguel",
                      "2. aluguel"
                   ],
                   "$$hashKey":"object:5596"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:5588"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"20ea4798-8bd1-47e1-986b-978629164d6f",
       "root":false,
       "$title":"‚ôªÔ∏è Menu",
       "$position":{ 
          "top":"343px",
          "left":"472px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "9dfa0cfe-f10f-49b1-b44e-032120b23796":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"fbbaadec-7667-418c-bcac-e8e141497524",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:1582",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"548b7275-4bdc-457a-8bd3-e2acc3f12437",
             "$connId":"con_28",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:26347"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:26338"
          }
       ],
       "$enteringCustomActions":[ 
          { 
             "type":"MergeContact",
             "$title":"Definir contato",
             "$invalid":false,
             "settings":{ 
                "extras":{ 
                   "motivo":"aluguel"
                },
                "name":"{{contact.name}}"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"9dfa0cfe-f10f-49b1-b44e-032120b23796",
       "root":false,
       "$title":"üè° Aluga",
       "$position":{ 
          "top":"356px",
          "left":"708px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "4cf44161-0ebf-40f3-94f2-ebb126d4a462":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"1715bfb3-05d1-4416-b5cb-10c3cc892315",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:1962",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"548b7275-4bdc-457a-8bd3-e2acc3f12437",
             "$connId":"con_33",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:25936"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:25927"
          }
       ],
       "$enteringCustomActions":[ 
          { 
             "type":"MergeContact",
             "$title":"Definir contato",
             "$invalid":false,
             "settings":{ 
                "extras":{ 
                   "motivo":"compra"
                },
                "name":"{{contact.name}}"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"4cf44161-0ebf-40f3-94f2-ebb126d4a462",
       "root":false,
       "$title":"üí∞‚úçÔ∏è Compra",
       "$position":{ 
          "top":"256px",
          "left":"708px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "desk:c86a834c-944f-4f79-8993-4b032960ece3":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":false,
                "conditions":[ 
                   { 
                      "source":"context",
                      "variable":"helpDeskHasTicket",
                      "comparison":"equals",
                      "values":[ 
                         "true"
                      ]
                   }
                ],
                "$cardContent":{ 
                   "document":{ 
                      "id":"cf79853d-5b32-4918-b2fe-73ecd827237c",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:4178",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "$isDeskOutput":true,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"input.type",
                   "comparison":"equals",
                   "values":[ 
                      "application/vnd.iris.ticket+json"
                   ]
                },
                { 
                   "source":"context",
                   "variable":"input.content@status",
                   "comparison":"equals",
                   "values":[ 
                      "ClosedAttendant"
                   ]
                }
             ],
             "$$hashKey":"object:4199",
             "$invalid":false,
             "stateId":"c4a7d32e-5828-497a-8f01-134ac1684c08",
             "$connId":"con_38"
          },
          { 
             "$isDeskOutput":true,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"input.type",
                   "comparison":"equals",
                   "values":[ 
                      "application/vnd.iris.ticket+json"
                   ]
                },
                { 
                   "source":"context",
                   "variable":"input.content@status",
                   "comparison":"equals",
                   "values":[ 
                      "ClosedClient"
                   ]
                }
             ],
             "$$hashKey":"object:4200",
             "$invalid":false,
             "stateId":"c4a7d32e-5828-497a-8f01-134ac1684c08",
             "$connId":"con_43"
          }
       ],
       "$enteringCustomActions":[ 
          { 
             "type":"ExecuteScript",
             "$title":"GetEncodedContactIdentity",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"state.previous.id",
                   "comparison":"notEquals",
                   "values":[ 
                      "desk:c86a834c-944f-4f79-8993-4b032960ece3"
                   ]
                }
             ],
             "settings":{ 
                "function":"run",
                "source":"function run(identity) {\n return (identity !== undefined) ? encodeURIComponent(identity) : identity;\n}",
                "inputVariables":[ 
                   "input.message.fromidentity"
                ],
                "outputVariable":"helpDeskEncodedFromIdentity"
             }
          },
          { 
             "type":"ProcessCommand",
             "$title":"GetOpenTicket",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"state.previous.id",
                   "comparison":"notEquals",
                   "values":[ 
                      "desk:c86a834c-944f-4f79-8993-4b032960ece3"
                   ]
                }
             ],
             "settings":{ 
                "from":"{{application.identifier}}@{{application.domain}}",
                "to":"postmaster@desk.msging.net",
                "method":"get",
                "uri":"/tickets?$filter=customerIdentity%20eq%20%27{{helpDeskEncodedFromIdentity}}%27%20and%20%28status%20eq%20%27Open%27%20or%20status%20eq%20%27Waiting%27%20or%20status%20eq%20%27Assigned%27%29",
                "metadata":{ 
                   "server.shouldStore":true
                },
                "variable":"helpDeskGetOpenTicketCommandResponse"
             }
          },
          { 
             "type":"ExecuteScript",
             "$title":"TreatGetOpenTicketResponse",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"state.previous.id",
                   "comparison":"notEquals",
                   "values":[ 
                      "desk:c86a834c-944f-4f79-8993-4b032960ece3"
                   ]
                }
             ],
             "settings":{ 
                "function":"run",
                "source":"function run(commandResponse) {\n    var response = JSON.parse(commandResponse)\n    var ticketExists = (response && response.resource && response.resource.items && response.resource.items.length > 0);\n  return ticketExists ? \"true\" : \"false\";\n}",
                "inputVariables":[ 
                   "helpDeskGetOpenTicketCommandResponse"
                ],
                "outputVariable":"helpDeskHasTicket"
             }
          },
          { 
             "type":"ProcessCommand",
             "$title":"OpenTicketIfNotFound",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"helpDeskHasTicket",
                   "comparison":"notEquals",
                   "values":[ 
                      "true"
                   ]
                }
             ],
             "settings":{ 
                "from":"{{application.identifier}}@{{application.domain}}",
                "to":"postmaster@desk.msging.net",
                "method":"set",
                "uri":"/tickets/{{helpDeskEncodedFromIdentity}}",
                "variable":"helpDeskOpenTicketCommandResponse",
                "type":"text/plain",
                "resource":"{{input.content}}",
                "metadata":{ 
                   "server.shouldStore":true
                }
             }
          },
          { 
             "type":"ExecuteScript",
             "$title":"TreatOpenTicketResponse",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"helpDeskHasTicket",
                   "comparison":"notEquals",
                   "values":[ 
                      "true"
                   ]
                }
             ],
             "settings":{ 
                "function":"run",
                "source":"function run(commandResponse) {\n    var response = commandResponse ? JSON.parse(commandResponse) : {}\n    var ticketExists = response && response.type === \"application/vnd.iris.ticket+json\" && response.resource \n    return ticketExists ? \"true\" : \"false\";\n}",
                "inputVariables":[ 
                   "helpDeskOpenTicketCommandResponse"
                ],
                "outputVariable":"helpDeskHasTicket"
             }
          },
          { 
             "type":"ForwardMessageToDesk",
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"helpDeskHasTicket",
                   "comparison":"equals",
                   "values":[ 
                      "true"
                   ]
                }
             ],
             "settings":{ 
 
             },
             "$invalid":false
          }
       ],
       "$leavingCustomActions":[ 
          { 
             "type":"SetVariable",
             "$title":"ResetHasTicket",
             "$invalid":false,
             "conditions":[ 
                { 
                   "source":"context",
                   "variable":"input.type",
                   "comparison":"equals",
                   "values":[ 
                      "application/vnd.iris.ticket+json"
                   ]
                },
                { 
                   "source":"context",
                   "variable":"input.content@status",
                   "comparison":"equals",
                   "values":[ 
                      "ClosedAttendant",
                      "ClosedClient"
                   ]
                }
             ],
             "settings":{ 
                "variable":"helpDeskHasTicket",
                "value":"false",
                "$invalid":false
             }
          }
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"desk:c86a834c-944f-4f79-8993-4b032960ece3",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"desk:c86a834c-944f-4f79-8993-4b032960ece3",
       "root":false,
       "$title":"üßëüîä Atendimento",
       "$position":{ 
          "top":"873px",
          "left":"313px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "c4a7d32e-5828-497a-8f01-134ac1684c08":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"4319d008-b0d8-4426-82ec-e02c230480b8",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"4319d008-b0d8-4426-82ec-e02c230480b8",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17000"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"f6e0e10f-876a-4263-8325-6841b9be247b",
                   "type":"text/plain",
                   "content":"Atendimento finalizado!"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"f6e0e10f-876a-4263-8325-6841b9be247b",
                      "type":"text/plain",
                      "content":"Atendimento finalizado!"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17001"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"0842a51c-e1f2-466c-8338-e57a97384448",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"0842a51c-e1f2-466c-8338-e57a97384448",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17020"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"cd795421-648e-4614-bdf8-6f3069ced5cc",
                   "type":"text/plain",
                   "content":"Estaremos aqui caso precise de mais alguma coisa."
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"cd795421-648e-4614-bdf8-6f3069ced5cc",
                      "type":"text/plain",
                      "content":"Estaremos aqui caso precise de mais alguma coisa."
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17021"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"8ebec425-72e6-4455-a37c-1e4044b88762",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"8ebec425-72e6-4455-a37c-1e4044b88762",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17040"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"49d2b51b-6552-4ae9-9295-84754b4a9f8e",
                   "type":"text/plain",
                   "content":"Agrade√ßo o contato! "
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"49d2b51b-6552-4ae9-9295-84754b4a9f8e",
                      "type":"text/plain",
                      "content":"Agrade√ßo o contato! "
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:17041"
          },
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"c410a1ee-fa15-43d6-bf86-216065eba11b",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:4570",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"onboarding",
             "$connId":"con_48",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:18145"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:18136"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"c4a7d32e-5828-497a-8f01-134ac1684c08",
       "root":false,
       "$title":"üëã Finaliza√ß√£o",
       "$position":{ 
          "top":"718px",
          "left":"939px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "1e97c277-e4ba-49e3-af91-fd731dd42cb6":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"3a6f1d7f-44e5-4e25-999c-dc030e7db702",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"3a6f1d7f-44e5-4e25-999c-dc030e7db702",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:35766"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"4f01cb29-28f3-4ea2-9784-a3b5ba276cf1",
                   "type":"text/plain",
                   "content":"A partir de agora voc√™ ser√° transferido para um humano para receber informa√ß√µes e agendar uma visita"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"4f01cb29-28f3-4ea2-9784-a3b5ba276cf1",
                      "type":"text/plain",
                      "content":"A partir de agora voc√™ ser√° transferido para um humano para receber informa√ß√µes e agendar uma visita"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:35767"
          },
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"00d60a6a-b7d0-428f-a001-8684b7aaa64f",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:11878",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"44b6da41-f2a2-4448-b8fc-d569ddbe93bf",
             "$connId":"con_53",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:13301"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:13292"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"1e97c277-e4ba-49e3-af91-fd731dd42cb6",
       "root":false,
       "$title":"üìÜ Agendar visita",
       "$position":{ 
          "top":"469px",
          "left":"710px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "44b6da41-f2a2-4448-b8fc-d569ddbe93bf":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"76d93399-d6fe-4580-b2f6-909dbf5a1547",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"76d93399-d6fe-4580-b2f6-909dbf5a1547",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14216"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"20574edc-db97-4838-8b39-c608f9dc95e3",
                   "type":"text/plain",
                   "content":"Aguarde um momento enquanto te transfiro para um atendimento humano"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"20574edc-db97-4838-8b39-c608f9dc95e3",
                      "type":"text/plain",
                      "content":"Aguarde um momento enquanto te transfiro para um atendimento humano"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14217"
          },
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"0638bd7d-9993-4621-9420-9fc21d21fd8f",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:13424",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"27c2516d-aea5-4ab0-8dbf-f58fddad49af",
             "$connId":"con_58",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:15061"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:15052"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"44b6da41-f2a2-4448-b8fc-d569ddbe93bf",
       "root":false,
       "$title":"üì• Transf. humano",
       "$position":{ 
          "top":"469px",
          "left":"315px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "548b7275-4bdc-457a-8bd3-e2acc3f12437":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"9bbcc058-3ee3-49c5-92db-33c1846a63f8",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"9bbcc058-3ee3-49c5-92db-33c1846a63f8",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:18675"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"10d48dc7-0bec-4dc6-bb84-44753cc52c94",
                   "type":"text/plain",
                   "content":"Em qual bairro ou regi√£o voc√™ est√° procurando?"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"10d48dc7-0bec-4dc6-bb84-44753cc52c94",
                      "type":"text/plain",
                      "content":"Em qual bairro ou regi√£o voc√™ est√° procurando?"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:18676"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"85af0ab4-c000-40f8-8280-7173c4a72d26",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"regiao"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false,
                "variable":"regiao"
             },
             "$$hashKey":"object:22021",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"1548c7f1-e52a-4306-a0d6-a9fa754e47fc",
             "$connId":"con_63",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:22713"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:22704"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
          { 
             "type":"MergeContact",
             "$title":"Definir contato",
             "$invalid":false,
             "settings":{ 
                "extras":{ 
                   "regiao":"{{regiao}}"
                },
                "name":"{{contact.name}}"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"548b7275-4bdc-457a-8bd3-e2acc3f12437",
       "root":false,
       "$title":"üèôÔ∏è Pergunta regi√£o",
       "$position":{ 
          "top":"256px",
          "left":"937px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "1548c7f1-e52a-4306-a0d6-a9fa754e47fc":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"9e600cbc-04e1-484e-bfb8-5a341145f333",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"9e600cbc-04e1-484e-bfb8-5a341145f333",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:19297"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"80377aa6-8162-48c7-8667-335b12e42005",
                   "type":"text/plain",
                   "content":"Quantos quartos?"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"80377aa6-8162-48c7-8667-335b12e42005",
                      "type":"text/plain",
                      "content":"Quantos quartos?"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:19298"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"4feda17b-9c8e-40fd-bc95-fd4ff2abdf93",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"quartos"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false,
                "variable":"quartos"
             },
             "$$hashKey":"object:22443",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"e843e60b-3417-4320-a3b9-9c293fc7a1e0",
             "$connId":"con_68",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:19564"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:19555"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
          { 
             "type":"MergeContact",
             "$title":"Definir contato",
             "$invalid":false,
             "settings":{ 
                "extras":{ 
                   "quartos":"{{quartos}}"
                },
                "name":"{{contact.name}}"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"1548c7f1-e52a-4306-a0d6-a9fa754e47fc",
       "root":false,
       "$title":"üè† Qt. de quartos",
       "$position":{ 
          "top":"358px",
          "left":"937px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "e843e60b-3417-4320-a3b9-9c293fc7a1e0":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"8aafadbd-1612-407f-91fa-8ab84d105979",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"8aafadbd-1612-407f-91fa-8ab84d105979",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:32065"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"3334088a-594b-4903-9c98-3b030de67411",
                   "type":"text/plain",
                   "content":"Por favor, informe o seu e-mail"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"3334088a-594b-4903-9c98-3b030de67411",
                      "type":"text/plain",
                      "content":"Por favor, informe o seu e-mail"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:32066"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"1ca37dcd-ded4-4f20-bd77-3667624bfe50",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"email"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false,
                "variable":"email"
             },
             "$$hashKey":"object:25666",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"1e97c277-e4ba-49e3-af91-fd731dd42cb6",
             "$connId":"con_73",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:35366"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:35357"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
          { 
             "type":"MergeContact",
             "$title":"Definir contato",
             "$invalid":false,
             "settings":{ 
                "extras":{ 
 
                },
                "name":"{{contact.name}}",
                "email":"{{email}}"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"e843e60b-3417-4320-a3b9-9c293fc7a1e0",
       "root":false,
       "$title":"üìß Email",
       "$position":{ 
          "top":"469px",
          "left":"937px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "27c2516d-aea5-4ab0-8dbf-f58fddad49af":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"ed828d88-a1fb-4d81-9381-796b4c44f450",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:2761",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"12ee5126-f191-4caa-a5cd-16136ac654fd",
             "$connId":"con_78",
             "conditions":[ 
                { 
                   "source":"context",
                   "comparison":"equals",
                   "values":[ 
                      "false"
                   ],
                   "$$hashKey":"object:7407",
                   "variable":"isWorkTime"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:7398"
          },
          { 
             "stateId":"5169155e-06ed-4768-99dd-79b4ef2c3b5b",
             "$connId":"con_83",
             "conditions":[ 
                { 
                   "source":"context",
                   "comparison":"equals",
                   "values":[ 
                      "true"
                   ],
                   "$$hashKey":"object:7914",
                   "variable":"isWorkTime"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:7906"
          }
       ],
       "$enteringCustomActions":[ 
          { 
             "type":"ExecuteScript",
             "$title":"Verifica hor√°rio",
             "$invalid":false,
             "settings":{ 
                "function":"run",
                "source":"//Default BLiP TimeZoneOffset = S√£o Paulo (GMT-3)\nvar DEFAULT_OFFSET = 3;\n\n// Receive the variables as parameters\nfunction run(offset, start, end, workDays) {\n\n    offset = parseInt(offset) + DEFAULT_OFFSET;\n\n    let today = nowUTC(offset);\n    let startDate = utcDate(start, offset);\n    let endDate = utcDate(end, offset);\n\n    return ((today - startDate) > 0) && ((endDate - today) > 0) && isWorkDay(today, workDays);\n}\n\n//Get now UTC Date\nfunction nowUTC(offset){\n    let now = new Date;\n    let utc_timestamp = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),\n        now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n\n    return new Date(utc_timestamp + offset * 3600 * 1000);\n}\n\n//Get UTC Date\nfunction utcDate(timeString, offset){\n    let now = new Date;\n\n    let hour = getValueByString('hour', timeString);\n    let minutes = getValueByString('minutes', timeString)\n\n    hour += DEFAULT_OFFSET;\n\n    let utc_timestamp = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),\n        hour, minutes, 0, 0);\n    return new Date(utc_timestamp + offset * 3600 * 1000);\n}\n\n//Get hour/minute by string with pattern HH:mm\nfunction getValueByString(type, timeString){\n\n    if(type === 'hour'){\n        return parseInt(timeString.substring(0, timeString.indexOf(':')));\n    }\n        \n    else if(type === 'minutes'){\n        return parseInt(timeString.substring(timeString.indexOf(':') + 1, timeString.length));\n    }\n\n    return 0;\n}\n\n//Get if today is a work day\nfunction isWorkDay(today, workDays){\n    workDays = workDays.split(',');\n\n    return workDays.indexOf(today.getDay().toString()) >= 0;\n}",
                "inputVariables":[ 
                   "config.dateTimeOffset",
                   "config.startDate",
                   "config.endDate",
                   "config.workDays"
                ],
                "outputVariable":"isWorkTime"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"27c2516d-aea5-4ab0-8dbf-f58fddad49af",
       "root":false,
       "$title":"üåê Verifica hor√°rio",
       "$position":{ 
          "top":"584px",
          "left":"315px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "12ee5126-f191-4caa-a5cd-16136ac654fd":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"58990439-f02f-4eab-8f4d-ebb22bcbc25d",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"58990439-f02f-4eab-8f4d-ebb22bcbc25d",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14519"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"5dfa2741-0f85-4bad-81fe-c19ec88b4c61",
                   "type":"text/plain",
                   "content":"Estamos fora do hor√°rio de atendimento.\n\nPor favor entre em contato entre {{config.startDate}} e {{config.endDate}}"
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"5dfa2741-0f85-4bad-81fe-c19ec88b4c61",
                      "type":"text/plain",
                      "content":"Estamos fora do hor√°rio de atendimento.\n\nPor favor entre em contato entre {{config.startDate}} e {{config.endDate}}"
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14520"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"4257517e-fc6f-48c7-8e3d-b08f261e6146",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:3141",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"c4a7d32e-5828-497a-8f01-134ac1684c08",
             "$connId":"con_88",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:15327"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:15318"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"12ee5126-f191-4caa-a5cd-16136ac654fd",
       "root":false,
       "$title":"Fora do hor√°rio",
       "$position":{ 
          "top":"684px",
          "left":"512px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "5169155e-06ed-4768-99dd-79b4ef2c3b5b":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"54920923-e5b3-40df-88ff-28598ecb7bb6",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:3521",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"a5de7611-fb3a-46f9-ab66-1918b35ee334",
             "$connId":"con_93",
             "conditions":[ 
                { 
                   "source":"context",
                   "comparison":"equals",
                   "values":[ 
                      "false"
                   ],
                   "$$hashKey":"object:11596",
                   "variable":"hasAttendant"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:11587"
          },
          { 
             "stateId":"2beb71b8-62de-4622-92a4-71efdb124832",
             "$connId":"con_98",
             "conditions":[ 
                { 
                   "source":"context",
                   "comparison":"equals",
                   "values":[ 
                      "true"
                   ],
                   "$$hashKey":"object:12698",
                   "variable":"hasAttendant"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:12690"
          }
       ],
       "$enteringCustomActions":[ 
          { 
             "type":"ProcessHttp",
             "$title":"Verifica atendentes",
             "$invalid":false,
             "settings":{ 
                "headers":{ 
                   "Content-Type":"application/json",
                   "Authorization":"Key aW1vYmlsaWFyaWF0ZW1wbGF0ZWJydW5vOkhyTW1DSzdVWmxCTjlidkVqamRR"
                },
                "method":"POST",
                "body":"{\n  \"id\": \"{{random.guid}}\",\n  \"from\": \"{{application.identifier}}@{{application.domain}}\",  \"to\": \"postmaster@desk.msging.net\",\n  \"method\": \"get\",\n  \"uri\": \"/attendants\"\n}",
                "uri":"https://msging.net/commands",
                "responseStatusVariable":"status",
                "responseBodyVariable":"result"
             },
             "conditions":[ 
 
             ]
          },
          { 
             "type":"ExecuteScript",
             "$title":"tratar resultado",
             "$invalid":false,
             "settings":{ 
                "function":"run",
                "source":"// Receive the variables as parameters\nfunction run(result) {\n    result = JSON.parse(result);\n    \n    let hasAttendant = false;\n\n    if(result.resource && result.resource.total >= 1){\n        hasAttendant  = result.resource.items.some(function(attendant){\n            return attendant.status === 'Online';\n        });\n    }\n    return hasAttendant;\n}",
                "inputVariables":[ 
                   "result"
                ],
                "outputVariable":"hasAttendant"
             },
             "conditions":[ 
 
             ]
          }
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"5169155e-06ed-4768-99dd-79b4ef2c3b5b",
       "root":false,
       "$title":"Verifica atendentes",
       "$position":{ 
          "top":"678px",
          "left":"313px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "a5de7611-fb3a-46f9-ab66-1918b35ee334":{ 
       "$contentActions":[ 
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"82471176-d5e2-4020-804e-1fa3643d1a40",
                   "type":"application/vnd.lime.chatstate+json",
                   "content":{ 
                      "state":"composing",
                      "interval":1000
                   }
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"82471176-d5e2-4020-804e-1fa3643d1a40",
                      "type":"application/vnd.lime.chatstate+json",
                      "content":{ 
                         "state":"composing",
                         "interval":1000
                      }
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14897"
          },
          { 
             "action":{ 
                "type":"SendMessage",
                "settings":{ 
                   "id":"67ac41be-1f3a-44d8-a930-a35f0f7f6bc4",
                   "type":"text/plain",
                   "content":"No momento estamos sem atendentes humanos dispon√≠veis.\n\nPor favor, tente novamente mais tarde."
                },
                "$cardContent":{ 
                   "document":{ 
                      "id":"67ac41be-1f3a-44d8-a930-a35f0f7f6bc4",
                      "type":"text/plain",
                      "content":"No momento estamos sem atendentes humanos dispon√≠veis.\n\nPor favor, tente novamente mais tarde."
                   },
                   "editable":true,
                   "deletable":true,
                   "position":"left"
                }
             },
             "$invalid":false,
             "$$hashKey":"object:14898"
          },
          { 
             "input":{ 
                "bypass":false,
                "$cardContent":{ 
                   "document":{ 
                      "id":"85a1047f-3901-44c2-9b11-4977a05422ab",
                      "type":"text/plain",
                      "textContent":"Entrada do usu√°rio",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:3901",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"c4a7d32e-5828-497a-8f01-134ac1684c08",
             "$connId":"con_103",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:14926"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:14917"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"a5de7611-fb3a-46f9-ab66-1918b35ee334",
       "root":false,
       "$title":"Nenhum atendente",
       "$position":{ 
          "top":"774px",
          "left":"512px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    },
    "2beb71b8-62de-4622-92a4-71efdb124832":{ 
       "$contentActions":[ 
          { 
             "input":{ 
                "bypass":true,
                "$cardContent":{ 
                   "document":{ 
                      "id":"c2c07832-1330-486a-a789-caf0f42bf698",
                      "type":"text/plain",
                      "content":"Entrada do usu√°rio"
                   },
                   "editable":false,
                   "deletable":true,
                   "position":"right",
                   "editing":false
                },
                "$invalid":false
             },
             "$$hashKey":"object:4281",
             "$invalid":false
          }
       ],
       "$conditionOutputs":[ 
          { 
             "stateId":"desk:c86a834c-944f-4f79-8993-4b032960ece3",
             "$connId":"con_108",
             "conditions":[ 
                { 
                   "source":"input",
                   "comparison":"exists",
                   "values":[ 
 
                   ],
                   "$$hashKey":"object:14119"
                }
             ],
             "$invalid":false,
             "$$hashKey":"object:14110"
          }
       ],
       "$enteringCustomActions":[ 
 
       ],
       "$leavingCustomActions":[ 
 
       ],
       "$inputSuggestions":[ 
 
       ],
       "$defaultOutput":{ 
          "stateId":"fallback",
          "$invalid":false
       },
       "$tags":[ 
 
       ],
       "id":"2beb71b8-62de-4622-92a4-71efdb124832",
       "root":false,
       "$title":"Atendente dispon√≠vel",
       "$position":{ 
          "top":"776px",
          "left":"313px"
       },
       "$invalidContentActions":false,
       "$invalidOutputs":false,
       "$invalidCustomActions":false,
       "$invalid":false
    }
 }